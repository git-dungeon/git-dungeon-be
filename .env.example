# 기본 서버 포트
PORT=3000

# 로그
LOG_LEVEL=info
LOG_PRETTY=true

# CORS
CORS_ALLOWED_ORIGINS=http://localhost:4173,http://localhost:5173,https://staging.gitdungeon.com,https://app.gitdungeon.com
CORS_ALLOW_CREDENTIALS=true

# PUBLIC URL / 환경
PUBLIC_BASE_URL=http://localhost:3000
NODE_ENV=development

# PostgreSQL
DATABASE_URL=postgresql://gitdungeon:gitdungeon@localhost:5432/git_dungeon?schema=public
DATABASE_SHADOW_URL=postgresql://gitdungeon:gitdungeon@localhost:5432/git_dungeon_shadow?schema=public
DATABASE_LOG_QUERIES=false
DATABASE_SKIP_CONNECTION=false

POSTGRES_PORT=5432
POSTGRES_USER=gitdungeon
POSTGRES_PASSWORD=gitdungeon
POSTGRES_DB=git_dungeon

# GitHub OAuth
AUTH_GITHUB_CLIENT_ID=replace-me
AUTH_GITHUB_CLIENT_SECRET=replace-me
AUTH_GITHUB_REDIRECT_URI=http://localhost:3000/api/auth/callback/github
AUTH_GITHUB_SCOPE=read:user,user:email

# GitHub Sync
GITHUB_SYNC_PAT=
GITHUB_SYNC_PATS=
GITHUB_SYNC_ENDPOINT=https://api.github.com/graphql
GITHUB_SYNC_USER_AGENT=git-dungeon-backend
GITHUB_SYNC_RATE_LIMIT_FALLBACK_REMAINING=100
GITHUB_SYNC_CRON=0 0 0 * * *
GITHUB_SYNC_BATCH_SIZE=50
GITHUB_SYNC_MANUAL_COOLDOWN_MS=21600000

# Redis / BullMQ
REDIS_URL=redis://localhost:6379
REDIS_SKIP_CONNECTION=false
GITHUB_TOKEN_LOCK_TTL_MS=30000
GITHUB_TOKEN_RATE_LIMIT_CACHE_MS=300000
GITHUB_TOKEN_COOLDOWN_MS=900000

# Dungeon
DUNGEON_INITIAL_AP=10
DUNGEON_BATCH_CRON=0 */5 * * * *
DUNGEON_BATCH_MAX_USERS_PER_TICK=200
DUNGEON_BATCH_MAX_ACTIONS_PER_USER=5
DUNGEON_BATCH_MIN_AP=1
DUNGEON_BATCH_INACTIVE_DAYS=30
DUNGEON_BATCH_LOCK_TTL_MS=60000
DUNGEON_BATCH_LOCK_BACKOFF_MS=200
DUNGEON_BATCH_LOCK_MAX_RETRY=3

# Queue / DLQ / Alerts
QUEUE_RETRY_MAX=3
QUEUE_RETRY_BACKOFF_BASE_MS=1500
QUEUE_RETRY_TTL_MS=7200000
QUEUE_RETRY_CONCURRENCY=5
QUEUE_DLQ_TTL_DAYS=7
ALERT_WEBHOOK_URL=
ALERT_FAILURE_THRESHOLD=3
